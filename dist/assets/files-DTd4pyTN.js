const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/choose-Ci9lKZfu.js","assets/index-oHsCOD9x.js","assets/index-EVoc_I_2.css","assets/choose-C2qaRyMN.css","assets/feedback-BkxJsSsq.js","assets/feedback-B5t6YWRH.css"])))=>i.map(i=>d[i]);
import{c as y,j as l,r as x,R,_ as T,H as $,L as z}from"./index-oHsCOD9x.js";import{S as q}from"./switchtheme-C2jhVXJy.js";import{y as H,L as M}from"./index-DB6OPemZ.js";import{c as P}from"./index-YW28v_dz.js";import{F as U}from"./footer-DYMPBW1b.js";import"./clsx-B-dksMZM.js";function A(){const t=y.c(2);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=l.jsx("h3",{children:l.jsx("a",{href:"/files",children:"File Share"})}),t[0]=e):e=t[0];let s;return t[1]===Symbol.for("react.memo_cache_sentinel")?(s=l.jsxs("header",{children:[e,l.jsx("div",{className:"wrapper",children:l.jsx(q,{})})]}),t[1]=s):s=t[1],s}const B="/assets/fileupload-OrM6AcDC.png",X={closeOnClick:!0,autoClose:3e3,pauseOnFocusLoss:!1,pauseOnHover:!1,draggable:!0},S=(t,e,s)=>{H[e](t,{...X,theme:s})},J=x.memo(V);function V({fileref:t,uploading:e,setFile:s,less:o,setper:n,setuploading:c,setoutput:i}){const r=a=>{if(a.target.files.length!==0)if(a.target.files[0].size/1e3>25e4){S("File Size Exceeded","error",localStorage.getItem("theme")||"dark");return}else s(a.target.files[0]),n(0),c(!1),i(null)};return l.jsxs("div",{className:"img"+(o?" less":""),onClick:()=>t.current.click(),children:[l.jsx("img",{src:B,alt:"File upload image"}),l.jsx("p",{children:"Click Here To Upload A File"}),l.jsx("p",{children:"Max File Size: 250MB"}),l.jsx("input",{ref:t,onClick:a=>{e&&a.preventDefault()},onChange:r,type:"file",name:"uploadedfile"})]})}function O(t){const e=y.c(9),{file:s,per:o}=t;let n,c;if(s){if(s.name.length>16){const m=s.name.length;n=s.name.slice(0,10)+"....."+s.name.slice(m-5,m)}else n=s.name;/^[0-9]{1,3}.[0-9]{2} MB$/.test(s.size)?c=s.size:c=parseFloat(s.size/1e6).toFixed(2).toString()+" MB"}let i;e[0]!==s||e[1]!==n||e[2]!==c?(i=s&&l.jsxs("div",{className:"info",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"File:"})," ",n]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Size:"})," ",c]})]}),e[0]=s,e[1]=n,e[2]=c,e[3]=i):i=e[3];let r;e[4]!==o?(r=l.jsx("div",{className:"progressouter",children:l.jsx("div",{className:"inner",style:{width:o}})}),e[4]=o,e[5]=r):r=e[5];let a;return e[6]!==i||e[7]!==r?(a=l.jsxs("div",{className:"status",children:[i,r]}),e[6]=i,e[7]=r,e[8]=a):a=e[8],a}const G=(t,e)=>{t.target.classList.remove("red"),t.target.classList.remove("green"),e(!1);let s=t.target.value;s.length>4&&(t.target.value=s.slice(0,4))},L=(t,e,s)=>{let o=t.current.querySelector("#ccode"),n=/^[0-9]{4}$/,c=o.value;if(!n.test(c)){S("Invalid Code","error",localStorage.getItem("theme")||"dark"),o.classList.add("red");return}fetch("/api/files/cverify",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-For":s.current},body:JSON.stringify({ccode:c})}).then(i=>i.json()).then(i=>{e(i.status),i.status===!1?(S(i.message,"warn",localStorage.getItem("theme")||"dark"),o.classList.add("red"),o.classList.remove("green")):(S(i.message,"success",localStorage.getItem("theme")||"dark"),o.classList.remove("red"),o.classList.add("green"))})},K=(t,e)=>{let s=e.current,o=s.querySelector("svg");s.classList.contains("show")?(s.classList.remove("show"),o.classList.add("normal")):(s.classList.add("show"),o.classList.remove("normal"))},W=(t,e,s)=>{s.current===null?fetch("https://ip.ageerasaiteja.workers.dev").then(o=>o.json()).then(o=>{s.current=o.ip,L(t,e,s)}):L(t,e,s)};function Y(t){const e=y.c(25),{setccodestatus:s,ccref:o,dodref:n,ccodestatus:c,ip:i}=t,r=x.useRef(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=k=>{K(k,r)},e[0]=a):a=e[0];let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=l.jsxs("div",{className:"optionstitle show",onClick:a,ref:r,children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",fill:"var(--back)",children:l.jsx("path",{d:"m321-80-71-71 329-329-329-329 71-71 400 400L321-80Z"})}),l.jsx("p",{children:"Options"})]}),e[1]=d):d=e[1];let m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=l.jsxs("div",{className:"chead",children:[l.jsx("input",{type:"checkbox",id:"ccodeo"}),l.jsx("label",{htmlFor:"ccodeo",children:"Click To Set Custom Code Of 4 Digits"})]}),e[2]=m):m=e[2];let u;e[3]!==s?(u=l.jsx("input",{onInput:k=>{G(k,s)},type:"number",id:"ccode",placeholder:"Enter Custom Code"}),e[3]=s,e[4]=u):u=e[4];let p;e[5]!==o||e[6]!==i||e[7]!==s?(p=W.bind(null,o,s,i),e[5]=o,e[6]=i,e[7]=s,e[8]=p):p=e[8];let f;e[9]!==c||e[10]!==p?(f=l.jsx("button",{onClick:p,disabled:c,children:"Verify"}),e[9]=c,e[10]=p,e[11]=f):f=e[11];let g;e[12]!==u||e[13]!==f?(g=l.jsxs("div",{className:"cbody",children:[u,f]}),e[12]=u,e[13]=f,e[14]=g):g=e[14];let h;e[15]!==o||e[16]!==g?(h=l.jsxs("div",{className:"ccode",ref:o,children:[m,g]}),e[15]=o,e[16]=g,e[17]=h):h=e[17];let j,v;e[18]===Symbol.for("react.memo_cache_sentinel")?(v=l.jsx("input",{type:"checkbox",id:"dod"}),j=l.jsx("label",{htmlFor:"dod",children:"Check To Download Only Once"}),e[18]=j,e[19]=v):(j=e[18],v=e[19]);let b;e[20]!==n?(b=l.jsxs("div",{className:"dod",ref:n,children:[v,j]}),e[20]=n,e[21]=b):b=e[21];let w;return e[22]!==b||e[23]!==h?(w=l.jsxs("div",{className:"options",children:[d,h,b]}),e[22]=b,e[23]=h,e[24]=w):w=e[24],w}function Z(t){const e=y.c(2),{submit:s}=t;let o;return e[0]!==s?(o=l.jsx("div",{className:"submit",children:l.jsx("button",{onClick:s,children:"Upload"})}),e[0]=s,e[1]=o):o=e[1],o}function Q(t){const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}const ee=(t,e)=>{let s=t.target.innerHTML.slice(5,9),o=s==="Code"?e.id:e.link;navigator.clipboard?navigator.clipboard.writeText(o):Q(o),S(`${s} Copied To Clipboard`,"success",localStorage.getItem("theme")||"dark")};function te(t){const e=y.c(10),{data:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=l.jsx("p",{children:"File Has Been Uploaded Successfully!!"}),e[0]=o):o=e[0];let n;e[1]!==s.id?(n=l.jsxs("p",{className:"showcode",children:["Your Code is ",l.jsx("strong",{children:s.id})]}),e[1]=s.id,e[2]=n):n=e[2];let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=l.jsx("p",{children:"Code Expires In 5 Hours"}),e[3]=c):c=e[3];let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=["Code","Link"],e[4]=i):i=e[4];let r;e[5]!==s?(r=l.jsx("div",{className:"buttons",children:i.map(d=>l.jsxs("button",{onClick:m=>{ee(m,s)},children:["Copy ",d]},d))}),e[5]=s,e[6]=r):r=e[6];let a;return e[7]!==n||e[8]!==r?(a=l.jsxs("div",{className:"output",children:[o,n,c,r]}),e[7]=n,e[8]=r,e[9]=a):a=e[9],a}const se=(t,e,s,o,n,c,i)=>{S("File Uploaded Succesfully!!","success",localStorage.getItem("theme")||"dark"),e.value="",e.classList.remove("green"),e.classList.remove("red"),s.checked=!1,o.checked=!1,n(!1);let r=window.location.origin+"/api/files/download/"+t.str,a=t.id.toString();for(;a.length!=4;)a="0"+a;console.log(r,a),c({id:a,link:r}),i(!1)},I=(t,e,s,o,n,c,i,r,a)=>{let d=t.current.querySelector("#ccode"),m=t.current.querySelector("#ccodeo"),u=e.current.querySelector("#dod"),p=parseFloat(s.size/1e6).toFixed(2).toString()+" MB";if(s===null){S("No File Selected","error",localStorage.getItem("theme")||"dark");return}if(m.checked&&!a){S("Custom Code Not Verified !!","error",localStorage.getItem("theme")||"dark"),d.focus(),d.classList.add("red");return}let f=new FormData;f.append("file",s),f.append("customstatus",m.checked),f.append("deleteondownload",u.checked),f.append("size",p),m.checked&&f.append("customid",d.value);let g=new XMLHttpRequest;g.open("POST","/api/files/upload"),g.setRequestHeader("X-Forwarded-For",o.current),g.upload.addEventListener("progress",h=>{let j=parseInt(h.loaded/h.total*100);n(`${j}%`)}),g.send(f),c(!0),g.onload=()=>{if(g.getResponseHeader("Content-Type").includes("application/json")){let j=JSON.parse(g.response);j.status?se(j,d,m,u,i,r,c):S(j.message,"error",localStorage.getItem("theme")||"dark")}else S("Please Try Again!!","error",localStorage.getItem("theme")||"dark")}},le=(t,e,s,o,n,c,i,r,a)=>{o.current===null?fetch("https://ip.ageerasaiteja.workers.dev").then(d=>d.json()).then(d=>{o.current=d.ip,I(t,e,s,o,n,c,i,r,a)}):I(t,e,s,o,n,c,i,r,a)};function _(t){const e=y.c(19),{choose:s,ip:o}=t,n=x.useRef(null),c=x.useRef(null),i=x.useRef(null),[r,a]=x.useState(null),[d,m]=x.useState(!1),[u,p]=x.useState("0%"),[f,g]=x.useState(!1),[h,j]=x.useState(null);let v;e[0]!==d||e[1]!==r||e[2]!==o?(v=()=>{le(c,i,r,o,p,g,m,j,d)},e[0]=d,e[1]=r,e[2]=o,e[3]=v):v=e[3];const b=v,w="upload"+(s==="Upload"?"":" disnone"),k=r!==null;let F;e[4]!==k||e[5]!==f?(F=l.jsx(J,{fileref:n,setFile:a,less:k,setper:p,uploading:f,setuploading:g,setoutput:j}),e[4]=k,e[5]=f,e[6]=F):F=e[6];let C;e[7]!==d||e[8]!==r||e[9]!==o||e[10]!==h||e[11]!==b||e[12]!==u||e[13]!==f?(C=r===null?r:l.jsxs("div",{className:"file",children:[l.jsx(O,{file:r,per:u}),f||h!==null?null:l.jsx(Y,{setccodestatus:m,ccref:c,dodref:i,ccodestatus:d,ip:o}),f||h!==null?null:l.jsx(Z,{submit:b}),h===null?h:l.jsx(te,{data:h})]}),e[7]=d,e[8]=r,e[9]=o,e[10]=h,e[11]=b,e[12]=u,e[13]=f,e[14]=C):C=e[14];let N;return e[15]!==w||e[16]!==F||e[17]!==C?(N=l.jsxs("div",{className:w,children:[F,C]}),e[15]=w,e[16]=F,e[17]=C,e[18]=N):N=e[18],N}const oe=R.memo(({submit:t,buttonref:e,inputref:s,file:o})=>{const n=r=>{if(o){r.preventDefault();return}let a=r.clipboardData.getData("text");/^[0-9]{4}$/.test(a)?s.current.forEach((m,u)=>{m.value=a[u-1],u<=3&&(m.disabled=!0,s.current[u+1].disabled=!1,s.current[u+1].focus())}):(S("Pasting Invalid Code","warn",localStorage.getItem("theme")||"dark"),r.preventDefault())},c=r=>{if(o){r.target.value="",r.target.disabled=!0,S("File Is Being Downloaded!","warn",localStorage.getItem("theme")||"dark"),r.preventDefault();return}e.current.disabled=!0;let a=r.target.value.trim(),d=a.length;if(d==0)return;d>1&&(r.target.value=a.slice(d-1,d));let m=r.target.nextSibling;m?(r.target.disabled=!0,m.disabled=!1,m.focus()):e.current.removeAttribute("disabled")},i=r=>{if(o){r.target.value="",r.target.disabled=!0,S("File Is Being Downloaded!","warn",localStorage.getItem("theme")||"dark"),r.preventDefault();return}if(r.key=="Backspace"){if(e.current.disabled=!0,r.target.value){r.target.value="";return}let a=r.target.previousSibling;a&&(r.target.disabled=!0,a.disabled=!1,a.focus())}else r.key=="Enter"&&e.current.disabled==!1&&t()};return l.jsx("div",{className:"dinput",children:[1,2,3,4].map(r=>l.jsx("input",{type:"number",ref:a=>s.current[r]=a,name:`i${r}`,onInput:c,onKeyDown:i,disabled:r>1||o!=!1,onPaste:n},r))})}),E=(t,e,s,o,n)=>{let c="";if(t.current.forEach(d=>{c+=d.value}),!/^[0-9]{4}$/.test(c)){S("Invalid Code!","warn",localStorage.getItem("theme")||"dark");return}let r=JSON.stringify({id:c}),a=P.AES.encrypt(r,"c7NAugAqajNELIyl8DwWrujnb03PAzrb").toString();fetch("/api/files/download",{method:"POST",headers:{"Content-Type":"application/json","X-Forwarded-For":n.current},body:JSON.stringify({token:a})}).then(d=>d.json()).then(d=>{if(d.status){o(d),t.current.forEach(p=>{p.disabled=!0}),e.current.disabled=!0;let m=d.redirect;m=window.location.origin+"/api"+m;let u=new XMLHttpRequest;u.open("GET",m),u.responseType="blob",u.setRequestHeader("X-Forwarded-For",n.current),u.send(),u.onprogress=p=>{let f=parseInt(p.loaded/p.total*100).toString();s(`${f}%`)},u.onload=()=>{if(setTimeout(()=>{s("0%"),o(!1),t.current[1].disabled=!1,t.current[1].focus(),e.current.disabled=!1,localStorage.getItem("filesfeedback")===null&&document.querySelector(".mainfeedback").classList.remove("disnone")},3e3),u.getResponseHeader("Content-Type").includes("application/json")){S("Some Error Occured!!","error",localStorage.getItem("theme")||"dark");return}let f=u.response,g=URL.createObjectURL(f),h=document.createElement("a");h.href=g,h.download=d.name,h.click(),S("File Downloaded Successfully","success",localStorage.getItem("theme")||"dark"),t.current.forEach(j=>{j&&(j.value="")})}}else S(d.message,"error",localStorage.getItem("theme")||"dark")})},re=(t,e,s,o,n)=>{n.current===null?fetch("https://ip.ageerasaiteja.workers.dev").then(c=>c.json()).then(c=>{n.current=c.ip,E(t,e,s,o,n)}):E(t,e,s,o,n)};function D({choose:t,ip:e}){const s=x.useRef(null),o=x.useRef([]),[n,c]=x.useState("0%"),[i,r]=x.useState(!1),a=x.useCallback(()=>re(o,s,c,r,e),[]);return x.useEffect(()=>{s.current.addEventListener("click",a),o.current[1].focus()},[]),l.jsxs("div",{className:"download"+(t==="Download"?"":" disnone"),children:[l.jsx("h3",{children:"Download"}),l.jsx("p",{className:"desc",children:"Enter Code To Download File"}),l.jsx(oe,{submit:a,buttonref:s,inputref:o,file:i}),l.jsx("div",{className:"submit",children:l.jsx("button",{disabled:!0,ref:s,children:"Download"})}),i?l.jsx(O,{file:i,per:n}):null]})}function ae(t){const e=y.c(3),{showchoose:s,choose:o}=t,n=x.useRef(null);let c;return e[0]!==o||e[1]!==s?(c=l.jsxs("div",{className:"files",children:[s==!0?l.jsx(D,{choose:o,ip:n}):l.jsx(D,{choose:"Download",ip:n}),s==!0?l.jsx(_,{choose:o,ip:n}):l.jsx(_,{choose:"Upload",ip:n})]}),e[0]=o,e[1]=s,e[2]=c):c=e[2],c}const ne=x.lazy(()=>T(()=>import("./choose-Ci9lKZfu.js"),__vite__mapDeps([0,1,2,3]))),ce=x.lazy(()=>T(()=>import("./feedback-BkxJsSsq.js"),__vite__mapDeps([4,1,2,5])));function ge(){const t=y.c(19);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=window.matchMedia("(max-width: 749px)"),t[0]=e):e=t[0];const[s,o]=x.useState(e.matches),[n,c]=x.useState("Download");let i,r;t[1]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{window.addEventListener("resize",()=>{o(window.matchMedia("(max-width: 749px)").matches)}),new URLSearchParams(window.location.search).get("error")==="File Not Found"&&setTimeout(ie,500)},r=[],t[1]=i,t[2]=r):(i=t[1],r=t[2]),x.useEffect(i,r);let a;t[3]===Symbol.for("react.memo_cache_sentinel")?(a=l.jsxs($,{children:[l.jsx("title",{children:"File Share"}),l.jsx("link",{rel:"icon",href:"/fileslogo.svg"}),l.jsx("meta",{name:"title",content:"File Share"}),l.jsx("meta",{property:"og:title",content:"File Share"}),l.jsx("meta",{name:"description",content:"Upload and share files easily with a unique code system. Files are stored securely and auto-delete after 2 hours. Try now!"}),l.jsx("meta",{property:"og:description",content:"Upload and share files easily with a unique code system. Files are stored securely and auto-delete after 2 hours. Try now!"}),l.jsx("meta",{name:"keywords",content:"file share, file sharing, share files, file sharing website, file share website"})]}),t[3]=a):a=t[3];let d;t[4]===Symbol.for("react.memo_cache_sentinel")?(d=l.jsx(z,{}),t[4]=d):d=t[4];let m;t[5]===Symbol.for("react.memo_cache_sentinel")?(m=l.jsx(A,{}),t[5]=m):m=t[5];let u;t[6]!==s?(u=s?l.jsx(ne,{setchoose:c}):null,t[6]=s,t[7]=u):u=t[7];let p;t[8]!==n||t[9]!==s?(p=l.jsx(ae,{showchoose:s,choose:n}),t[8]=n,t[9]=s,t[10]=p):p=t[10];let f;t[11]!==u||t[12]!==p?(f=l.jsx("div",{className:"fileshare",children:l.jsxs("div",{className:"main",children:[m,u,p]})}),t[11]=u,t[12]=p,t[13]=f):f=t[13];let g,h,j;t[14]===Symbol.for("react.memo_cache_sentinel")?(j=localStorage.getItem("filesfeedback")===null?l.jsx(ce,{application:"files"}):null,g=l.jsx(M,{}),h=l.jsx(U,{}),t[14]=g,t[15]=h,t[16]=j):(g=t[14],h=t[15],j=t[16]);let v;return t[17]!==f?(v=l.jsxs("div",{className:"filesapp",children:[a,l.jsxs(x.Suspense,{fallback:d,children:[f,j,g,h]})]}),t[17]=f,t[18]=v):v=t[18],v}function ie(){return S("File Not Found!","error",localStorage.getItem("theme")||"dark")}export{ge as default};
